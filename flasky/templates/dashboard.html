{% extends 'layout.html' %}

{% block style_includes %}
    <!-- DataTables -->
    <link rel="stylesheet"
          href="{{ url_for('static', filename='plugins/datatables-bs4/css/dataTables.bootstrap4.min.css') }}">
    <link rel="stylesheet"
          href="{{ url_for('static', filename='plugins/datatables-responsive/css/responsive.bootstrap4.min.css') }}">
{% endblock %}

{% block body %}

    {#  SIDEBAR  #}
    <aside class="udash-sidebar">
        <div class="udash-sidebar-user-wrap d-flex pt-3 pb-3 mb-3">
            <div class="udash-sidebar-image-wrap">
                <img src="{{ url_for('static', filename='dist/img/avatar5.png') }}" alt="" class="udash-sidebar-image">
            </div>
            <div class="udash-sidebar-info-wrap">
                {{ session.auth.username }}
            </div>
        </div>
    </aside>

    {#  CONTENT WRAP  #}
    <div class="udash-wrap">
        <h2>
            Dashboard
        </h2>
        <p class="lead">
            Switch to {% if session.auth.admin %} <a href="/admin/dashboard">Admin Dashboard</a> {% else %}
            <span class="text-secondary">Admin Dashboard</span> {% endif %}!
        </p>

        <a href="/become_admin"
           class="btn pull-right {% if session.auth.admin %} disabled btn-outline-danger {% else %} btn-danger {% endif %}">
            Become an Administrator</a>
        <a href="/become_user"
           class="btn pull-right {% if not session.auth.admin %} disabled btn-outline-info {% else %} btn-info {% endif %}">
            Become an User</a>
        <a href="/add_article" class="btn btn-primary pull-right">New Article</a>

        <div class="my-4">
            <table class="table table-striped table-bordered mt-3" id="udash-table">
                <thead>
                <tr>
                    <th>Article Title</th>
                    <th>Author</th>
                    <th>Date</th>
                    <th></th>
                </tr>
                </thead>
                {% for article in articles|reverse %}
                    <tr class="udash-tr">
                        <td><a href="/articles/{{ article.id }}"> {{ article.title }} </a></td>
                        <td>{{ article.author }}</td>
                        <td>{{ article.create_date }}</td>
                        <td class="">
                            <a href="/edit_article/{{ article.id }}" class="mr-2"><i class="fas fa-pencil-alt"></i></a>
                            <a href="/delete_article/{{ article.id }}" class="text-danger"><i
                                    class="far fa-trash-alt"></i></a>
                        </td>
                    </tr>
                {% endfor %}
                <tfoot>
                <tr>
                    <th>Article Title</th>
                    <th>Author</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>


    {% if not session.auth.activated %}
        <div class="alert alert-warning no-activate-alert" role="alert">
            You haven't activated your account! <a href="/send_activation">Resend link</a>!
        </div>
    {% endif %}

{% endblock %}